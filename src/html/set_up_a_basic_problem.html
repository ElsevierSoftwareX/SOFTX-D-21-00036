<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,IE=9,chrome=1"><meta name="generator" content="MATLAB 2020b"><title>Set up a basic problem</title><style type="text/css">.rtcContent { padding: 30px; } .S0 { margin: 3px 10px 5px 4px; padding: 0px; line-height: 28.8px; min-height: 0px; white-space: pre-wrap; color: rgb(213, 80, 0); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 24px; font-weight: 400; text-align: left;  }
.S1 { margin: 2px 10px 9px 4px; padding: 0px; line-height: 21px; min-height: 0px; white-space: pre-wrap; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 14px; font-weight: 400; text-align: left;  }
.S2 { margin: 10px 0px 20px; padding-left: 0px; font-family: Helvetica, Arial, sans-serif; font-size: 14px;  }
.S3 { margin-left: 56px; line-height: 21px; min-height: 0px; text-align: left; white-space: pre-wrap;  }
.S4 { margin: 20px 10px 5px 4px; padding: 0px; line-height: 20px; min-height: 0px; white-space: pre-wrap; color: rgb(60, 60, 60); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 20px; font-weight: 700; text-align: left;  }
.CodeBlock { background-color: #F7F7F7; margin: 10px 0 10px 0;}
.S5 { border-left: 0.994318px solid rgb(233, 233, 233); border-right: 0.994318px solid rgb(233, 233, 233); border-top: 0.994318px solid rgb(233, 233, 233); border-bottom: 0.994318px solid rgb(233, 233, 233); border-radius: 4px; padding: 6px 45px 4px 13px; line-height: 17.234px; min-height: 18px; white-space: nowrap; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S6 { margin: 10px 10px 9px 4px; padding: 0px; line-height: 21px; min-height: 0px; white-space: pre-wrap; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 14px; font-weight: 400; text-align: left;  }
.S7 { border-left: 0.994318px solid rgb(233, 233, 233); border-right: 0.994318px solid rgb(233, 233, 233); border-top: 0.994318px solid rgb(233, 233, 233); border-bottom: 0px none rgb(0, 0, 0); border-radius: 4px 4px 0px 0px; padding: 6px 45px 0px 13px; line-height: 17.234px; min-height: 18px; white-space: nowrap; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S8 { border-left: 0.994318px solid rgb(233, 233, 233); border-right: 0.994318px solid rgb(233, 233, 233); border-top: 0px none rgb(0, 0, 0); border-bottom: 0px none rgb(0, 0, 0); border-radius: 0px; padding: 0px 45px 0px 13px; line-height: 17.234px; min-height: 18px; white-space: nowrap; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S9 { border-left: 0.994318px solid rgb(233, 233, 233); border-right: 0.994318px solid rgb(233, 233, 233); border-top: 0px none rgb(0, 0, 0); border-bottom: 0.994318px solid rgb(233, 233, 233); border-radius: 0px 0px 4px 4px; padding: 0px 45px 4px 13px; line-height: 17.234px; min-height: 18px; white-space: nowrap; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S10 { margin: 15px 10px 5px 4px; padding: 0px; line-height: 18px; min-height: 0px; white-space: pre-wrap; color: rgb(60, 60, 60); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 17px; font-weight: 700; text-align: left;  }</style></head><body><div class = rtcContent><h1  class = 'S0'><span>Set up a basic problem</span></h1><div  class = 'S1'><span>To set up a basic problem, you need to:</span></div><ul  class = 'S2'><li  class = 'S3'><span>Write a function which defines the system and cost function in an m-file,</span></li><li  class = 'S3'><span>Set up the problem using the DynaProg interface.</span></li></ul><h2  class = 'S4'><span>Define the system and cost function</span></h2><div  class = 'S1'><span>The system and cost function is a MATLAB function having signature:</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S5'><span style="white-space: pre;"><span>[x_next, stage_cost, unfeas] = sysfun(x, u, </span><span class="error_squiggle_rte1307206341">~</span><span>)</span></span></div></div></div><div  class = 'S6'><span>Your function should accept three inputs: the first two are the state variables </span><span style=' font-family: monospace;'>x</span><span> and control variables </span><span style=' font-family: monospace;'>u.</span><span> The third input can be used to pass an </span><a href = "./handle_exogenous_inputs.html"><span>exogenous input</span></a><span> to the system function. If your system model does not make use of exogenous inputs, you can replace the third input in your function signature with a tilde (~).</span></div><div  class = 'S1'><span>Also, the function should return three outputs: the first output contains the updated state variables (</span><span texencoding="x_{k+1}" style="vertical-align:-6px"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADcAAAAlCAYAAADmxXHWAAADCUlEQVRoQ+3XT8hUZRQG8J+KqSmWpi2syCIJJEOURI3Cyl1WZrgQpNIUDEwxgkANJUMoIyiEouyPFC0UtYULpYRKC0nbpUUSiZH0RyoiSGihnDoDw2VmvuvMN+P4NWczd+be977P8z7nPOfMIAM4Bg1gbnrkLlV1e8r1lOvCE+ilZReKUgpST7lSx9SFD/2vlRuFiTiGcwVxxmEEfuhC0f6FVEu5IViJu3Ev4vtuPFRF4hlswGDciUPdSLBeWl6XiizDGwn8avyKtbgliU3HAzh+KZGrYL0cv+MyLMBf+fl4N5IpYipjKJFyt+N13ID7cXagkNuCp9JQ7sIndYhdiym4FSeyTtt5BjciSuVwvU3KKPdgAv0TVzRAexMiXZ9ErPmgTcyuxzo8io3Y3Aq5m/FNviCuv20AehVeQrSJP9pAbjxmYBqeTZItkduBednTHsNbDUDvRJxsACgbV+Jk7lG2pdyBT1slF9LPxjA8jHewpA7q6Hm/pPFEuygbY/Abop4/LrmoZXJRsO/hHizCm/gOUVsRMZ2MxY/5PXreUczF5zkITMDfeB9f1QHecXIBfF8aRDToIBQOGBHtINJoK17M6/j96SzwAButYmkay3L81ECRjpDblCm3C1OxDe9WgQojmZQueAafZZpWHvkoL0K5+zAZL9SYSYs8O0Lu7bTX2Dxmx+cKKMIJX06wcRAxW1ZieE4y4WD/5Ji2vYZatyHWVsfQnGOPZO1V3wvzCkMrxgXXXGwyK+uqUkfFl4aiAT7+JVRHqPVhNtSZmFOn2cdM+kRhbZjVI9iL04V7e7I8WibXoCz6vPV81mek4heZsgv7XPXfAx1Jy5JYaj72ZbpmzJ0xNazP+vwekbKNZtGuJndV9rc1eAUxRUTL2J8GtRivNTi5ZshF/w2PCMMKl64ZZWbLvhSN9Iuij5T8Oh9egVdxAPPzr1K991wIuZFYjZiUog//nOYXB3mquEF/kKsH+pqqBt/ogEbjYAKOIaDfop3k+g1ksy/qkWv25C72up5yF1uBZvc/D/yenyZEYgp4AAAAAElFTkSuQmCC" width="27.5" height="18.5" alt="x_(k+1)" /></span><span>, the value of the state variables after advancing the system by one stage) and the second output contains the stage cost incurred. The third output is used to define unfeasibility, which allows to set constraints on the state and control variables . If you do not wish to use this feature, you must still specify a third output in your function signature, but this should return an empty array: you should include anywhere in your function the line </span><span style=' font-family: monospace;'>unfeas = [];.</span></div><div  class = 'S1'><span>Note that any name can be used in place of </span><span style=' font-family: monospace;'>sysfun</span><span>, provided that it suits MATLAB syntax for function naming.</span></div><div  class = 'S1'><span>Even f the system is described by one or more state variable, treat </span><span style=' font-family: monospace;'>x</span><span> and </span><span style=' font-family: monospace;'>x_next </span><span>as cell arrays, where each cell contains one of the state variables.</span><span style=' font-family: monospace;'>.</span><span> For example, if your system has two states </span><span texencoding="x_1" style="vertical-align:-6px"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAlCAYAAAC+uuLPAAABvklEQVRYR+3Wz4tOcRTH8deYkEkpYTflZxYslBWiBis/w8rGj2ZKShayUlLMjo1Y+V2sFNmxVcg/QCKlNKtRSpPULOjUeerp9jzN9z7maRZzv5t7b5173t/z+X7OuXfAHKyBOWBqoH1VvZG3kXdWFGiM1JJxKVbjA/5WtF2BJfheV/NO8g7iHHZjP+L5OY61Jb+MK1iAXXhTB9ztTIezgjHczYSrMIlL2JzArTiMj7MBbeUYwk8swlFM5fVsHUg1tsS9Id0O3MEaHMKffkOv42IaaQSvC4A78a2byUoqPZJG+oVlMwC34Sr2pjrvOsWXQDfiU74c95+7gDdhJS7g4P9Cn+JA9uQoHsxQbbRTVBs+6KnSU9iOxTiBRzjdT+haPMEeHMd9fMX6hMY0Wo6JyiZ6rjQSvkL0YzR+gL5k8mibcOZt3Mj7dm4t6LWU7hm24B4et2ULA23AC/zA25S7qnYt6EPEGcaKF8cr2c7jZvZrbDBmb6dVC7oQ0WdxbtVzaiUPBabzq9PNT7WgBYOmKGT+QKOXT2IfXvY6Bos0xbpssTOIP473uJVu/92epGT2lkKL4xposVS9BM4fef8BWdRVJr6qVG0AAAAASUVORK5CYII=" width="14.5" height="18.5" alt="x_1" /></span><span> and </span><span texencoding="x_2" style="vertical-align:-6px"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAlCAYAAAC+uuLPAAACJElEQVRYR+3VS6iNYRQG4OcQIiHJBOUaA6QUoZTLjAgDKYmIhFNKBiK5zBhQTNyLDBQZUGYISUYG5JJSGFEiAyK0Tmuftu3/z9nntE9nYH+T/9/7W2u9//eu911fi15YLb2AqQnao6w36W3S2xAGmkKq0DgYY/EUv2u4HYGBeNtVzovo7YvtWIgliN/XsKqq+D7sRx/Mx/2uAJf1dEyeYBNOZ8GR+IA9mJqAM7EczxoBWqkxCJ/QHyvxNZ9buwJSG1uPeoO6eTiFcViGbz0NegS7UkgLcLcDwFmYTduV+RCPi2LrOemKFNIXDC0BDEGdxfr8uErdYGdLd+idjOeZGO8vC4BbEaI6hndYjd0IQcb7leqcek4aCUvTkxtxrgD0MtbiV9Ve2O1Gxkde++oMNOiaiwFYhwvYUAMaCp+GRzX/D0vln0zf1wU6HpewCGuyZ68xMbNjGg3H+5I+T8eTHCoxXDoFjYK3EH4M4wfQq8wK27zBCRzN9yLcbdiLKfhcBnooqbuKGTiDi1XBIaBJuI6PeJB0lznoNg4inn+t6p6eT8lHQMzWwzWxodDjaYn4wJi9ZSuEMypB/4mpBu2HOYi+lfUpGPiRt04ZYEyvEODmgpupLacz9XZwmMKtuAh25kD4WZbcSNAJOICg9nsVYFgqBkS0r6EnHY07uJk3UaV++HsxduBeI0GH5GAIaxStF2mb9r1G0lt3/5ugdVPVncD/h94/0EtbJnLZubMAAAAASUVORK5CYII=" width="14.5" height="18.5" alt="x_2" /></span><span>, and the dynamics of </span><span texencoding="x_1" style="vertical-align:-6px"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAlCAYAAAC+uuLPAAABvklEQVRYR+3Wz4tOcRTH8deYkEkpYTflZxYslBWiBis/w8rGj2ZKShayUlLMjo1Y+V2sFNmxVcg/QCKlNKtRSpPULOjUeerp9jzN9z7maRZzv5t7b5173t/z+X7OuXfAHKyBOWBqoH1VvZG3kXdWFGiM1JJxKVbjA/5WtF2BJfheV/NO8g7iHHZjP+L5OY61Jb+MK1iAXXhTB9ztTIezgjHczYSrMIlL2JzArTiMj7MBbeUYwk8swlFM5fVsHUg1tsS9Id0O3MEaHMKffkOv42IaaQSvC4A78a2byUoqPZJG+oVlMwC34Sr2pjrvOsWXQDfiU74c95+7gDdhJS7g4P9Cn+JA9uQoHsxQbbRTVBs+6KnSU9iOxTiBRzjdT+haPMEeHMd9fMX6hMY0Wo6JyiZ6rjQSvkL0YzR+gL5k8mibcOZt3Mj7dm4t6LWU7hm24B4et2ULA23AC/zA25S7qnYt6EPEGcaKF8cr2c7jZvZrbDBmb6dVC7oQ0WdxbtVzaiUPBabzq9PNT7WgBYOmKGT+QKOXT2IfXvY6Bos0xbpssTOIP473uJVu/92epGT2lkKL4xposVS9BM4fef8BWdRVJr6qVG0AAAAASUVORK5CYII=" width="14.5" height="18.5" alt="x_1" /></span><span> is described by the equation </span><span texencoding="\dot{x}_1 = x_1-x_2" style="vertical-align:-6px"><img src="data:image/png;base64,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" width="74.5" height="20.5" alt="dx_1/dt" /></span><span>, this would be coded in the function as:</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre;"><span class="error_squiggle_rte1307206341" style="color: rgb(0, 0, 255);">function</span><span style="color: rgb(0, 0, 255);"> </span><span>[x_next, </span><span class="warning_squiggle_rte1307206341">stage_cost</span><span>, </span><span class="warning_squiggle_rte1307206341">unfeas</span><span>] = sysfun(x, </span><span class="warning_squiggle_rte1307206341 warningHighlight1307206341">u</span><span>, ~)</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span style="color: rgb(0, 0, 255);">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>x_next{1} = x{1} + (x{1} - x{2}) .* dt;</span></span></div></div><div class="inlineWrapper"><div  class = 'S9'><span style="white-space: pre;"><span style="color: rgb(0, 0, 255);">...</span></span></div></div></div><div  class = 'S6'><span>Similarly, treat </span><span style=' font-family: monospace;'>u</span><span> as a cell array as well.</span></div><div  class = 'S1'><span>Finally, the stage cost can be any function of the state and control variables, and it must be a scalar.</span></div><h2  class = 'S4'><span>Set up and solve the optimization problem</span></h2><div  class = 'S1'><span>To set up and solve a problem, you must write a script where you:</span></div><ul  class = 'S2'><li  class = 'S3'><span>specify the problem structure,</span></li><li  class = 'S3'><span>create a DynaProg problem,</span></li><li  class = 'S3'><span>run the solution.</span></li></ul><div  class = 'S1'><span>First, you need to create discrete grids for the state and control variables, as the Dynamic Programming algorithm. Note that this does not mean that the state variables evolution will be discretized in your optimal solution, but it may affect the optimality of the solution. For more information, see </span><a href = "./theory.html"><span>Theory</span></a><span style=' font-weight: bold;'>.</span></div><div  class = 'S1'><span>To define a grid, simply create a numeric or logical vector.</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre;"><span class="warning_squiggle_rte1307206341">x_grid</span><span> = 0:0.1:1;</span></span></div></div><div class="inlineWrapper"><div  class = 'S9'><span style="white-space: pre;"><span>u_grid = -1:0.2:1;</span></span></div></div></div><div  class = 'S6'><span>If the state and/or control variables are not scalar, specify them as a cell array of vectors, each cell containing the grid for one of the variables.</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre;"><span>x1_grid = 0:0.1:1;</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>x2_grid = 0:0.1:1;</span></span></div></div><div class="inlineWrapper"><div  class = 'S9'><span style="white-space: pre;"><span>x_grid = {x1_grid, x2_grid};</span></span></div></div></div><div  class = 'S6'><span>Then, you need to specify an initial condition for all state variables. Specify them in a cell array. </span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S5'><span style="white-space: pre;"><span class="warning_squiggle_rte1307206341">x_initial</span><span> = {0, 0};</span></span></div></div></div><div  class = 'S6'><span>Finally, you can specify constraints on the final value of the state variables (at the end of the simulation). Specify them as cell arrays of two-element vectors; each vector should contain the lower and upper bounds of your constraint.</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S5'><span style="white-space: pre;"><span class="warning_squiggle_rte1307206341">x_final</span><span> = {[0.3 0.4], [0.65 0.7]};</span></span></div></div></div><div  class = 'S6'><span>You must specify one initial condition for each of the state variables.</span></div><div  class = 'S1'><span>If you do not wish to specify target values for one or more of the final state variables, specify those target values as empty arrays. For example, for a two-state system, you can specify a target value for </span><span texencoding="x_1" style="vertical-align:-6px"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAlCAYAAAC+uuLPAAABvklEQVRYR+3Wz4tOcRTH8deYkEkpYTflZxYslBWiBis/w8rGj2ZKShayUlLMjo1Y+V2sFNmxVcg/QCKlNKtRSpPULOjUeerp9jzN9z7maRZzv5t7b5173t/z+X7OuXfAHKyBOWBqoH1VvZG3kXdWFGiM1JJxKVbjA/5WtF2BJfheV/NO8g7iHHZjP+L5OY61Jb+MK1iAXXhTB9ztTIezgjHczYSrMIlL2JzArTiMj7MBbeUYwk8swlFM5fVsHUg1tsS9Id0O3MEaHMKffkOv42IaaQSvC4A78a2byUoqPZJG+oVlMwC34Sr2pjrvOsWXQDfiU74c95+7gDdhJS7g4P9Cn+JA9uQoHsxQbbRTVBs+6KnSU9iOxTiBRzjdT+haPMEeHMd9fMX6hMY0Wo6JyiZ6rjQSvkL0YzR+gL5k8mibcOZt3Mj7dm4t6LWU7hm24B4et2ULA23AC/zA25S7qnYt6EPEGcaKF8cr2c7jZvZrbDBmb6dVC7oQ0WdxbtVzaiUPBabzq9PNT7WgBYOmKGT+QKOXT2IfXvY6Bos0xbpssTOIP473uJVu/92epGT2lkKL4xposVS9BM4fef8BWdRVJr6qVG0AAAAASUVORK5CYII=" width="14.5" height="18.5" alt="x_1" /></span><span> and no target value for </span><span texencoding="x_2" style="vertical-align:-6px"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAlCAYAAAC+uuLPAAACJElEQVRYR+3VS6iNYRQG4OcQIiHJBOUaA6QUoZTLjAgDKYmIhFNKBiK5zBhQTNyLDBQZUGYISUYG5JJSGFEiAyK0Tmuftu3/z9nntE9nYH+T/9/7W2u9//eu911fi15YLb2AqQnao6w36W3S2xAGmkKq0DgYY/EUv2u4HYGBeNtVzovo7YvtWIgliN/XsKqq+D7sRx/Mx/2uAJf1dEyeYBNOZ8GR+IA9mJqAM7EczxoBWqkxCJ/QHyvxNZ9buwJSG1uPeoO6eTiFcViGbz0NegS7UkgLcLcDwFmYTduV+RCPi2LrOemKFNIXDC0BDEGdxfr8uErdYGdLd+idjOeZGO8vC4BbEaI6hndYjd0IQcb7leqcek4aCUvTkxtxrgD0MtbiV9Ve2O1Gxkde++oMNOiaiwFYhwvYUAMaCp+GRzX/D0vln0zf1wU6HpewCGuyZ68xMbNjGg3H+5I+T8eTHCoxXDoFjYK3EH4M4wfQq8wK27zBCRzN9yLcbdiLKfhcBnooqbuKGTiDi1XBIaBJuI6PeJB0lznoNg4inn+t6p6eT8lHQMzWwzWxodDjaYn4wJi9ZSuEMypB/4mpBu2HOYi+lfUpGPiRt04ZYEyvEODmgpupLacz9XZwmMKtuAh25kD4WZbcSNAJOICg9nsVYFgqBkS0r6EnHY07uJk3UaV++HsxduBeI0GH5GAIaxStF2mb9r1G0lt3/5ugdVPVncD/h94/0EtbJnLZubMAAAAASUVORK5CYII=" width="14.5" height="18.5" alt="x_2" /></span><span> as</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S5'><span style="white-space: pre;"><span class="warning_squiggle_rte1307206341">x_final</span><span> = {[0.3 0.4], []};</span></span></div></div></div><div  class = 'S6'><span>If you do not wish to specify target values for any of the final state variables, you can also define the final state as an empty array.</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S5'><span style="white-space: pre;"><span>x_final = [];</span></span></div></div></div><h3  class = 'S10'><span>Set up the problem object </span></h3><div  class = 'S1'><span>Once you have created the system function, state variables grids, initial conditions and target final values and control variables grids, you must create a DynaProg problem:</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S5'><span style="white-space: pre;"><span>prob = DynaProg(StateGrid, StateInitial, StateFinal, ControlGrid, Nstages, </span><span class="warning_squiggle_rte1307206341">SysName</span><span>);</span></span></div></div></div><div  class = 'S6'><span>Where </span><span style=' font-family: monospace;'>Nstages </span><span>is the number of stages and </span><span style=' font-family: monospace;'>SysName</span><span> is a function handle to the system model you created, e.g.</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S5'><span style="white-space: pre;"><span class="warning_squiggle_rte1307206341">SysName</span><span> = @sysfun;</span></span></div></div></div><h3  class = 'S10'><span>Run the optimization problem and visualize results  </span></h3><div  class = 'S1'><span>Finally, you can run the optimization problems and return the problem structure including results by using the </span><span style=' font-family: monospace;'>run</span><span> method.</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S5'><span style="white-space: pre;"><span>prob = run(prob);</span></span></div></div></div><div  class = 'S6'><span>The dynamic programming optimization algorithm runs and creates three main results:</span></div><ul  class = 'S2'><li  class = 'S3'><span style=' font-family: monospace;'>ControlProfile</span><span>: the optimal control variable(s) for each stage, stored in a cell array of vectors. </span></li><li  class = 'S3'><span style=' font-family: monospace;'>StateProfile</span><span>: the value of the state variable(s) for each stage when applying the optimal control policy, stored in a cell array of vectors.</span></li><li  class = 'S3'><span style=' font-family: monospace;'>CostProfile</span><span>: the value of the stage cost for each stage when applying the optimal control policy, stored vector.</span></li></ul><div  class = 'S1'><span>Once the optimization is complete, the results are saved in the problem object itself, and you can access them via dot indexing, e.g. you can access the optimal control variables profile by querying:</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S5'><span style="white-space: pre;"><span class="warning_squiggle_rte1307206341">optimal_cv</span><span> = prob.ControlProfile;</span></span></div></div></div><div  class = 'S6'><span>You can also visualize them using the </span><span style=' font-family: monospace;'>plot</span><span> method.</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S5'><span style="white-space: pre;"><span>plot(prob)</span></span></div></div></div><div  class = 'S6'><img class = "imageNode" src = "data:image/png;base64,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3a4Va+64YWvTp2BzqTq37YULF2RX1LhEguatSlgIi03CYnchhb3MpW7XijV33LC16VOwuVRt23ZoaGjLli09PT3GEs1blbAQFpuExe5CCnuZS92uFWvuuGFr06dgc6l6tu3k5KTT6ezr65u7wfz8vOatSlgIi03CwiG78Je51OpasSFD+7C1aVJwSKkatm1DQ0PIbZgPHDigeasSFsJik7AgpH/vSV2+fFmd+mIm7EJNSJaCk6ttk64b8IESllRqVYQEAABagJAAAAAhAQAAICQAAEBIAAAACAkAABASAAAAQgIAAIQEAACAkAAAACEBAAAgJAAAQEgAAAAICQAAEBIAAABCAgAAhAQAAICQAAAAIQEAACAksCMLCwuvvfZaTk7OHXfcce+99xYVFV28eDExL713796CgoIrV65EXm1ykRU9xKo3bi4VACEBrADZsssWec0it99+u5q48847P//88wS8+oYNG+TlfvjhhwjrNDc3r1u3rre3N/qHWPXGQ0oFQEgAK+CPf/yjbIh/+ctfqg2x3+93uVyyRDbWmgjp0UcflXWMrfxHH300MDBw7do1Dd94SKkACAkgWhYWFtavXy/b0P7+fmPhv/71r9LS0r/97W9qdufOnW632xCAmpXhhSyRiZdeeundd9998MEH77jjjmeeeeb7778vKyuTadnQt7S0RH6GECHJ68qfZImUlJGR0draKgv3799/1113yToPP/zwq6++Kkt+97vfqYe/+OKLMtHX16eeVl5aZuUZZFqeUMq4++67pZInn3xyYmJiFW9ceP311zMzM6Wk+++/Xyr56aef1HJRjnhrwyKPPPKIepKlpQIgJIBo8Xq9sgG97bbbZAN9s3XWrVsn6xjbYjUrW3xZIhN3LbJ3717Z+qtZcYlYQR0B++qrryI8g1lIoqtf/OIXMi2P3b1799q1a2X6008/FZ2o9WVNsYX5IWILmfjtb3+rnvbIkSMyK1KU6dzcXJn+9a9/LfaSiY0bN3733XcrfeMvv/yyrCOvLi+h3l1+fr4sHxsbk/LuueeeoqIij8cj07fffrs4b2mpAAgJIFpOnz6tNqAR1oksJOGf//zn9cWvT9SmX60p4waZfe+996IUkoxvOjo6jh07ptYRw8ny48ePX19yHMx4iDyhjHJEKpcuXZLloh9Z/uGHH8qYSSacTqdaXwYuMnvo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" width = "560" height = "420" alt = "get_started_plot_1.png" style = "vertical-align: baseline"></img></div><div  class = 'S1'><span>By default, the plot automatically names the state variables, control variables and cumulative cost, and it uses the simulation stages as the x-axis.</span></div><div  class = 'S1'><span>To specify names for the state and control variables, set the StateName and ControlName properties of your problem structure to a string array. To specify a name for the cumulative cost, set the </span><span style=' font-family: monospace;'>CostName</span><span> property to a string.</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre;"><span>prob.StateName = [</span><span style="color: rgb(160, 32, 240);">"sv name 1"</span><span>, </span><span style="color: rgb(160, 32, 240);">"sv name 2"</span><span>];</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>prob.ControlName = [</span><span style="color: rgb(160, 32, 240);">"cv name 1"</span><span>, </span><span style="color: rgb(160, 32, 240);">"cv name 2"</span><span>];</span></span></div></div><div class="inlineWrapper"><div  class = 'S9'><span style="white-space: pre;"><span>prob.CostName = </span><span style="color: rgb(160, 32, 240);">"cost name"</span><span>;</span></span></div></div></div><div  class = 'S6'><span>To specify a time array that replaces the stages in the x-axis, set the Time property to a numeric array.</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S5'><span style="white-space: pre;"><span>prob.Time = linspace(0, 1, Nstages+1);</span></span></div></div></div><div  class = 'S6'><span>Alternatively, specify the relevant name-value pairs in constructing the problem object:</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre;"><span class="warning_squiggle_rte1307206341">prob</span><span> = DynaProg(x_grid, x_init, x_final, u_grid, Nint, @cart, </span><span style="color: rgb(0, 0, 255);">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>    </span><span style="color: rgb(160, 32, 240);">'StateName'</span><span>, [</span><span style="color: rgb(160, 32, 240);">"sv name 1"</span><span>, </span><span style="color: rgb(160, 32, 240);">"sv name 2"</span><span>], </span><span style="color: rgb(160, 32, 240);">'ControlName'</span><span>, </span><span style="color: rgb(0, 0, 255);">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>    [</span><span style="color: rgb(160, 32, 240);">"cv name 1"</span><span>, </span><span style="color: rgb(160, 32, 240);">"cv name 2"</span><span>], </span><span style="color: rgb(160, 32, 240);">'CostName'</span><span>, </span><span style="color: rgb(160, 32, 240);">"Energy"</span><span>, </span><span style="color: rgb(160, 32, 240);">'Time'</span><span>, time);</span></span></div></div><div class="inlineWrapper"><div  class = 'S9'></div></div></div><div  class = 'S6'></div></div>
<br>
<!-- 
##### SOURCE BEGIN #####
%% Set up a basic problem
% To set up a basic problem, you need to:
%% 
% * Write a function which defines the system and cost function in an m-file,
% * Set up the problem using the DynaProg interface.
%% Define the system and cost function
% The system and cost function is a MATLAB function having signature:

[x_next, stage_cost, unfeas] = sysfun(x, u, ~)
%% 
% Your function should accept three inputs: the first two are the state variables 
% |x| and control variables |u.| The third input can be used to pass an <matlab:open('./handle_exogenous_inputs.mlx') 
% exogenous input> to the system function. If your system model does not make 
% use of exogenous inputs, you can replace the third input in your function signature 
% with a tilde (~).
% 
% Also, the function should return three outputs: the first output contains 
% the updated state variables ($x_{k+1}$, the value of the state variables after 
% advancing the system by one stage) and the second output contains the stage 
% cost incurred. The third output is used to define unfeasibility, which allows 
% to set constraints on the state and control variables . If you do not wish to 
% use this feature, you must still specify a third output in your function signature, 
% but this should return an empty array: you should include anywhere in your function 
% the line |unfeas = [];.|
% 
% Note that any name can be used in place of |sysfun|, provided that it suits 
% MATLAB syntax for function naming.
% 
% Even f the system is described by one or more state variable, treat |x| and 
% |x_next| as cell arrays, where each cell contains one of the state variables.|.| 
% For example, if your system has two states $x_1$ and $x_2$, and the dynamics 
% of $x_1$ is described by the equation $\dot{x}_1 = x_1-x_2$, this would be coded 
% in the function as:

function [x_next, stage_cost, unfeas] = sysfun(x, u, ~)
...
x_next{1} = x{1} + (x{1} - x{2}) .* dt;
...
%% 
% Similarly, treat |u| as a cell array as well.
% 
% Finally, the stage cost can be any function of the state and control variables, 
% and it must be a scalar.
%% Set up and solve the optimization problem
% To set up and solve a problem, you must write a script where you:
%% 
% * specify the problem structure,
% * create a DynaProg problem,
% * run the solution.
%% 
% First, you need to create discrete grids for the state and control variables, 
% as the Dynamic Programming algorithm. Note that this does not mean that the 
% state variables evolution will be discretized in your optimal solution, but 
% it may affect the optimality of the solution. For more information, see <matlab:open('./theory.mlx') 
% Theory>*.*
% 
% To define a grid, simply create a numeric or logical vector.

x_grid = 0:0.1:1;
u_grid = -1:0.2:1;
%% 
% If the state and/or control variables are not scalar, specify them as a cell 
% array of vectors, each cell containing the grid for one of the variables.

x1_grid = 0:0.1:1;
x2_grid = 0:0.1:1;
x_grid = {x1_grid, x2_grid};
%% 
% Then, you need to specify an initial condition for all state variables. Specify 
% them in a cell array. 

x_initial = {0, 0};
%% 
% Finally, you can specify constraints on the final value of the state variables 
% (at the end of the simulation). Specify them as cell arrays of two-element vectors; 
% each vector should contain the lower and upper bounds of your constraint.

x_final = {[0.3 0.4], [0.65 0.7]};
%% 
% You must specify one initial condition for each of the state variables.
% 
% If you do not wish to specify target values for one or more of the final state 
% variables, specify those target values as empty arrays. For example, for a two-state 
% system, you can specify a target value for $x_1$ and no target value for $x_2$ 
% as

x_final = {[0.3 0.4], []};
%% 
% If you do not wish to specify target values for any of the final state variables, 
% you can also define the final state as an empty array.

x_final = [];
% Set up the problem object 
% Once you have created the system function, state variables grids, initial 
% conditions and target final values and control variables grids, you must create 
% a DynaProg problem:

prob = DynaProg(StateGrid, StateInitial, StateFinal, ControlGrid, Nstages, SysName);
%% 
% Where |Nstages| is the number of stages and |SysName| is a function handle 
% to the system model you created, e.g.

SysName = @sysfun;
% Run the optimization problem and visualize results  
% Finally, you can run the optimization problems and return the problem structure 
% including results by using the |run| method.

prob = run(prob);
%% 
% The dynamic programming optimization algorithm runs and creates three main 
% results:
%% 
% * |ControlProfile|: the optimal control variable(s) for each stage, stored 
% in a cell array of vectors. 
% * |StateProfile|: the value of the state variable(s) for each stage when applying 
% the optimal control policy, stored in a cell array of vectors.
% * |CostProfile|: the value of the stage cost for each stage when applying 
% the optimal control policy, stored vector.
%% 
% Once the optimization is complete, the results are saved in the problem object 
% itself, and you can access them via dot indexing, e.g. you can access the optimal 
% control variables profile by querying:

optimal_cv = prob.ControlProfile;
%% 
% You can also visualize them using the |plot| method.

plot(prob)
%% 
% 
% 
% By default, the plot automatically names the state variables, control variables 
% and cumulative cost, and it uses the simulation stages as the x-axis.
% 
% To specify names for the state and control variables, set the StateName and 
% ControlName properties of your problem structure to a string array. To specify 
% a name for the cumulative cost, set the |CostName| property to a string.

prob.StateName = ["sv name 1", "sv name 2"];
prob.ControlName = ["cv name 1", "cv name 2"];
prob.CostName = "cost name";
%% 
% To specify a time array that replaces the stages in the x-axis, set the Time 
% property to a numeric array.

prob.Time = linspace(0, 1, Nstages+1);
%% 
% Alternatively, specify the relevant name-value pairs in constructing the problem 
% object:

prob = DynaProg(x_grid, x_init, x_final, u_grid, Nint, @cart, ...
    'StateName', ["sv name 1", "sv name 2"], 'ControlName', ...
    ["cv name 1", "cv name 2"], 'CostName', "Energy", 'Time', time);

%% 
%
##### SOURCE END #####
--></body></html>